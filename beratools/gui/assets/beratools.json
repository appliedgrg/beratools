{
    "toolbox": [
        {
            "category": "Mapping",
            "description": "Tools used to map center lines and footprint polygons of linear disturbances in forests using a Canopy Height Model (CHM) as reference.",
            "tools": [
                {
                    "name": "Check Seed Lines",
                    "info": "Check seed line quality and fix issues if present.",
                    "tool_type": "python",
                    "tool_api": "check_seed_line",
                    "icon": "check_seed_line.gif",
                    "tech_link": "https://appliedgrg.github.io/beratools/start/check_seed_line",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "label": "Seed Line",
                            "description": "Input seed line file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "out_line",
                            "label": "Output Seed Line",
                            "description": "Output Seed Line file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Vertex Optimization",
                    "info": "Relocating line intersections to seismic line paths",
                    "tool_type": "python",
                    "tool_api": "vertex_optimization",
                    "icon": "vertex_optimization.gif",
                    "tech_link": "https://appliedgrg.github.io/beratools/start/vertex_optimization",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "label": "Input Line",
                            "description": "Input lines to optimize.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_raster",
                            "label": "CHM Raster",
                            "description": "Input CHM raster used to optimize vertices.",
                            "type": "raster",
                            "subtype": "tif",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "search_distance",
                            "label": "Vertex searching distance (m)",
                            "description": "Bigger value will let tool enlarge searching area for better vertex location.",
                            "type": "number",
                            "subtype": "number",
                            "default": 30,
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "line_radius",
                            "label": "Line Processing Radius",
                            "description": "Maximum processing distance from input lines. A large search radius may increase processing times whereas a small radius may cause undesired clipping.",
                            "type": "number",
                            "subtype": "number",
                            "default": 35,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_line",
                            "label": "Output Centerline",
                            "description": "Output optimized centerline file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Centerline",
                    "info": "Extract the least cost path and smooth centerline between vertices of the seed lines.",
                    "tool_type": "python",
                    "tool_api": "centerline",
                    "icon": "centerline.gif",
                    "tech_link": "https://appliedgrg.github.io/beratools/start/centerline",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "label": "Seed Line",
                            "description": "Input seed lines.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_raster",
                            "label": "CHM Raster",
                            "description": "Input raster image used to calculate the centerline.",
                            "type": "raster",
                            "subtype": "tif",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "line_radius",
                            "label": "Line Processing Radius",
                            "description": "Maximum processing distance from input lines. A large search radius may increase processing times whereas a small radius may cause undesired clipping.",
                            "type": "number",
                            "subtype": "float",
                            "default": 15.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "proc_segments",
                            "label": "Process Segments",
                            "description": "If set to True, will process each segment between each vertex of the input lines separately. If set to False, will process each line from start to end ignoring midpoints. The default is True, since it is assumed that the input lines for this tool are lines manually digitized at regional-scale with sparse vertices at a fine-scale. If using fine-scale (1:1,000) lines as input this may be set to False.",
                            "type": "list",
                            "subtype": "bool",
                            "data": [
                                true,
                                false
                            ],
                            "default": true,
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "out_line",
                            "label": "Output Centerline",
                            "description": "Output centerline file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Canopy Footprint (Absolute Threshold)",
                    "info": "Creates footprint polygons for each input line based on a least cost corridor method and individual line thresholds.",
                    "tool_type": "python",
                    "tool_api": "canopy_footprint_absolute",
                    "icon": "canopy_footprint_absolute.gif",
                    "tech_link": "https://appliedgrg.github.io/beratools/start/canopy_footprint_abs",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "label": "Centerline",
                            "description": "Input centerline file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_chm",
                            "label": "CHM Raster",
                            "description": "Input CHM image used to calculate the line footprint.",
                            "type": "raster",
                            "subtype": "tif",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "corridor_thresh",
                            "label": "Corridor Threshold",
                            "description": "The least cost corridor thresholds.",
                            "type": "number",
                            "subtype": "float",
                            "default": 3.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "max_ln_width",
                            "label": "Maximum Line Width",
                            "description": "Maximum processing width for input lines. A large value may increase processing times whereas a small value may cause undesired clipping.",
                            "type": "number",
                            "subtype": "float",
                            "default": 32.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "exp_shk_cell",
                            "label": "Expand And Shrink Cell Range",
                            "description": "Range used for cell erosion before final polygons are generated. Useful to remove small artifacts.  If the cell size is 1m or larger then set this as zero.",
                            "type": "number",
                            "subtype": "int",
                            "default": 0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_footprint",
                            "label": "Output Footprint",
                            "description": "Output footprint polygon file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Canopy Footprint (Relative Threshold)",
                    "info": "Creates dynamic footprint polygons for each input line based on a least cost corridor method and individual line canopy thresholds and cost raster.",
                    "tool_type": "python",
                    "tool_api": "line_footprint_relative",
                    "icon": "line_footprint_relative.gif",
                    "tech_link": "https://appliedgrg.github.io/beratools/start/line_footprint_rel",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "label": "Centerline",
                            "description": "Input line file.",
                            "type": "vector",
                            "subtype": "shp",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_chm",
                            "label": "CHM Raster",
                            "description": "Input raster image used calculate the surrounding forest elevation percentile, create canopy and cost raster.",
                            "type": "raster",
                            "subtype": "tif",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "max_ln_width",
                            "label": "Maximum Line Width",
                            "description": "Maximum processing width for input lines. A large value may increase processing times whereas a small value may cause undesired clipping.",
                            "type": "number",
                            "subtype": "float",
                            "default": 32.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "exp_shk_cell",
                            "label": "Expand And Shrink Cell Range",
                            "description": "Range used for cell erosion before final polygons are generated. Useful to remove small artifacts.  If the cell size is 1m or larger then set this as zero.",
                            "type": "number",
                            "subtype": "int",
                            "default": 0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_footprint",
                            "label": "Output Footprint Shapefile",
                            "description": "Output footprint polygons.",
                            "type": "vector",
                            "subtype": "shp",
                            "default": "",
                            "output": true,
                            "optional": false
                        },
                        {
                            "variable": "out_centerline",
                            "label": "Output Centerline Shapefile",
                            "description": "Output centerline polygons.",
                            "type": "vector",
                            "subtype": "shp",
                            "default": "",
                            "output": true,
                            "optional": true
                        },
                        {
                            "variable": "off_ln_dist",
                            "label": "Offset Line Distance",
                            "description": "Offset distance from input lines.",
                            "type": "number",
                            "subtype": "float",
                            "default": 10.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "canopy_percentile",
                            "label": "Canopy Percentile",
                            "description": "The Nth percentile of the surrounding forest.",
                            "type": "list",
                            "subtype": "int",
                            "data": [
                                50,
                                55,
                                60,
                                65,
                                70,
                                75,
                                80,
                                85,
                                90,
                                95
                            ],
                            "default": 90,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "canopy_thresh_percentage",
                            "label": "Canopy Threshold Percentage",
                            "description": "Apply % on calculating Canopy Threshold height from Canopy percentile elevation.",
                            "type": "number",
                            "subtype": "float",
                            "default": 50,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "tree_radius",
                            "label": "Tree Search Radius",
                            "description": "Radius of canopy influence in the cost raster. This factor smooths the canopy in the cost raster which helps to prevent gaps in sparsely vegetated areas (e.g. wetlands) to be incorrectly identified as footprint. A large search radius (>=5m) may cause excessive smoothing of the cost raster which can lead to least cost paths ignoring forest-line nuances in sparsely vegetated forests. A small radius (<=1m) may cause the least cost path to cut corners through small gaps in sparse vegetation as well as avoid small obstacles that should not affect overall line shape.",
                            "type": "number",
                            "subtype": "float",
                            "default": 1.5,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "max_line_dist",
                            "label": "Maximum Line Distance",
                            "description": "Maximum euclidean distance from canopy. This is a second smoothing factor which helps to position the forest line shape in the center of the line footprint. An excessively small (<=1m) or large (>20m) value may cause the center line to be positioned close to one of the edges of the footprint.",
                            "type": "number",
                            "subtype": "float",
                            "default": 1.5,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "canopy_avoidance",
                            "label": "Canopy Avoidance",
                            "description": "Ratio of importance between canopy search radius and euclidean distance. A value close to zero (0) prioritizes search radius whereas a value close to one (1) prioritizes euclidean distance. A small value (<=0.1) may cause the forest lines to miss nuances in sparsely vegetated terrain whereas a big value (>=0.5) may overemphasize turns in complex trails. This factor influences final footprint size in a minor way.",
                            "type": "number",
                            "subtype": "float",
                            "default": 0.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "exponent",
                            "label": "Cost Raster Exponent",
                            "description": "Affects the cost of vegetated areas in an exponential fashion. A low (<=1) exponent may lead to lines cutting through corners, whereas a large (>=3) exponent may lead to least cost paths completely avoiding narrow lines.",
                            "type": "number",
                            "subtype": "int",
                            "default": 1,
                            "output": false,
                            "optional": true
                        }
                    ]
                },
                {
                    "name": "Ground Footprint",
                    "info": "Generating fixed width ground footprint",
                    "tool_type": "python",
                    "tool_api": "ground_footprint",
                    "icon": "ground_footprint.gif",
                    "tech_link": "https://appliedgrg.github.io/beratools/start/ground_footprint",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "label": "Centerline",
                            "description": "Input centerline file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_footprint",
                            "label": "Input Footprint",
                            "description": "Input footprint.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "in_layer_fp",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "n_samples",
                            "label": "Sampling number",
                            "description": "Sampling number for each line.",
                            "type": "number",
                            "subtype": "int",
                            "default": 15,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "offset",
                            "label": "Perpendicular line length",
                            "description": "The length of the perpendicular line",
                            "type": "number",
                            "subtype": "float",
                            "default": 30.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "max_width",
                            "label": "Use maximum width",
                            "description": "Use maximum width",
                            "type": "list",
                            "subtype": "bool",
                            "data": [
                                true,
                                false
                            ],
                            "default": true,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_footprint",
                            "label": "Output Fixed Footprint",
                            "description": "Output fixed width footprint file.",
                            "type": "vector",
                            "subtype": "shp",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                }
            ]
        }
    ]
}