{
    "toolbox": [
        {
            "category": "Mapping",
            "description": "Tools used to map center lines and footprint polygons of linear disturbances in forests using a Canopy Height Model (CHM) as reference.",
            "tools": [
                {
                    "name": "Vertex Optimization",
                    "info": "Relocating line intersections to seismic line paths",
                    "multiprocessing": true,
                    "batch_processing": true,
                    "tool_type": "python",
                    "tool_api": "vertex_optimization",
                    "paramFile": "\\Scripts\\FLM_VO_params.txt",
                    "image": "../Images/FLM_IO_VertexOptimization.gif",
                    "tech_link": "https://forest-line-mapper.readthedocs.io/en/latest/Tools/Pre-processing/VertexOptimization.html",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "parameter": "Forest Lines Feature Class",
                            "description": "Input vector layer.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_raster",
                            "parameter": "CHM Raster",
                            "description": "Input CHM raster used to optimize vertices.",
                            "type": "raster",
                            "typelab": "TIF",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "search_distance",
                            "parameter": "Vertex searching distance (m)",
                            "description": "Bigger value will let tool enlarge searching area for better vertex location.",
                            "type": "number",
                            "typelab": "number",
                            "default": 30,
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "line_radius",
                            "parameter": "Line Processing Radius",
                            "description": "Maximum processing distance from input lines. A large search radius may increase processing times whereas a small radius may cause undesired clipping.",
                            "type": "number",
                            "typelab": "number",
                            "default": 35,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_line",
                            "parameter": "Output Center-Line",
                            "description": "Output optimized center-line shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Line Grouping",
                    "info": "Group lines into groups by connection and direction.",
                    "multiprocessing": true,
                    "batch_processing": true,
                    "tool_type": "python",
                    "tool_api": "line_grouping",
                    "paramFile": "\\Scripts\\FLM_VO_params.txt",
                    "image": "../Images/BT_LineGrouping.gif",
                    "tech_link": "https://forest-line-mapper.readthedocs.io/en/latest/Tools/Mapping/LineGroupinng.html",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "parameter": "Forest Lines Feature Class",
                            "description": "Input polyline shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "out_line",
                            "parameter": "Output Center-Line",
                            "description": "Output grouped lines shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Centerline",
                    "info": "Determines the least cost path between vertices of the input lines.",
                    "multiprocessing": true,
                    "batch_processing": true,
                    "tool_type": "python",
                    "tool_api": "centerline",
                    "paramFile": "\\Scripts\\FLM_CL_params.txt",
                    "image": "../Images/FLM_IO_CenterLine.gif",
                    "tech_link": "https://forest-line-mapper.readthedocs.io/en/latest/Tools/Mapping/Centerline.html",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "parameter": "Forest Lines Feature Class",
                            "description": "Input polyline shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_raster",
                            "parameter": "CHM/Cost Raster",
                            "description": "Input raster image used to calculate the least cost path.",
                            "type": "raster",
                            "typelab": "TIF",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "line_radius",
                            "parameter": "Line Processing Radius",
                            "description": "Maximum processing distance from input lines. A large search radius may increase processing times whereas a small radius may cause undesired clipping.",
                            "type": "number",
                            "typelab": "float",
                            "default": 15.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "proc_segments",
                            "parameter": "Process Segments",
                            "description": "If set to True, will process each segment between each vertex of the input lines separately. If set to False, will process each line from start to end ignoring midpoints. The default is True, since it is assumed that the input lines for this tool are lines manually digitized at regional-scale with sparse vertices at a fine-scale. If using fine-scale (1:1,000) lines as input this may be set to False.",
                            "type": "list",
                            "typelab": "bool",
                            "data": [
                                true,
                                false
                            ],
                            "default": true,
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "out_line",
                            "parameter": "Output Centerline",
                            "description": "Output centerline shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Canopy Footprint (Absolute Threshold)",
                    "info": "Creates footprint polygons for each input line based on a least cost corridor method and individual line thresholds.",
                    "multiprocessing": true,
                    "batch_processing": true,
                    "tool_type": "python",
                    "tool_api": "line_footprint_absolute",
                    "paramFile": "\\Scripts\\FLM_LFP_params.txt",
                    "image": "../Images/FLM_IO_LineFootprint.gif",
                    "tech_link": "https://forest-line-mapper.readthedocs.io/en/latest/Tools/Mapping/LineFootprint.html",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "parameter": "Center-lines Feature Class",
                            "description": "Input polyline shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_chm",
                            "parameter": "CHM Raster",
                            "description": "Input CHM image used to calculate the line footprint.",
                            "type": "raster",
                            "typelab": "TIF",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "corridor_thresh",
                            "parameter": "Corridor Threshold",
                            "description": "The least cost corridor thresholds.",
                            "type": "number",
                            "typelab": "float",
                            "default": 3.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "max_ln_width",
                            "parameter": "Maximum Line Width",
                            "description": "Maximum processing width for input lines. A large value may increase processing times whereas a small value may cause undesired clipping.",
                            "type": "number",
                            "typelab": "float",
                            "default": 32.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "exp_shk_cell",
                            "parameter": "Expand And Shrink Cell Range",
                            "description": "Range used for cell erosion before final polygons are generated. Useful to remove small artifacts.  If the cell size is 1m or larger then set this as zero.",
                            "type": "number",
                            "typelab": "int",
                            "default": 0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_footprint",
                            "parameter": "Output Footprint Shapefile",
                            "description": "Output footprint polygons.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                },
                {
                    "name": "Canopy Footprint (Relative Threshold)",
                    "info": "Creates dynamic footprint polygons for each input line based on a least cost corridor method and individual line canopy thresholds and cost raster.",
                    "multiprocessing": true,
                    "batch_processing": true,
                    "tool_type": "python",
                    "tool_api": "line_footprint_relative",
                    "paramFile": "\\Scripts\\FLM_DLFP_params.txt",
                    "image": "../Images/FLM_IO_LineFootprint.gif",
                    "tech_link": "https://forest-line-mapper.readthedocs.io/en/latest/Tools/Mapping/DynLineFootprintFS.html",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "parameter": "Center-lines Feature Class",
                            "description": "Input polyline shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_chm",
                            "parameter": "Input CHM Raster",
                            "description": "Input raster image used calculate the surrounding forest elevation percentile, create canopy and cost raster.",
                            "type": "raster",
                            "typelab": "TIF",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "max_ln_width",
                            "parameter": "Maximum Line Width",
                            "description": "Maximum processing width for input lines. A large value may increase processing times whereas a small value may cause undesired clipping.",
                            "type": "number",
                            "typelab": "float",
                            "default": 32.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "exp_shk_cell",
                            "parameter": "Expand And Shrink Cell Range",
                            "description": "Range used for cell erosion before final polygons are generated. Useful to remove small artifacts.  If the cell size is 1m or larger then set this as zero.",
                            "type": "number",
                            "typelab": "int",
                            "default": 0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_footprint",
                            "parameter": "Output Footprint Shapefile",
                            "description": "Output footprint polygons.",
                            "type": "vector",
                            "typelab": "SHP",
                            "default": "",
                            "output": true,
                            "optional": false
                        },
                        {
                            "variable": "out_centerline",
                            "parameter": "Output Centerline Shapefile",
                            "description": "Output centerline polygons.",
                            "type": "vector",
                            "typelab": "SHP",
                            "default": "",
                            "output": true,
                            "optional": true
                        },
                        {
                            "variable": "off_ln_dist",
                            "parameter": "Offset Line Distance",
                            "description": "Offset distance from input lines.",
                            "type": "number",
                            "typelab": "float",
                            "default": 10.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "canopy_percentile",
                            "parameter": "Canopy Percentile",
                            "description": "The Nth percentile of the surrounding forest.",
                            "type": "list",
                            "typelab": "int",
                            "data": [
                                50,
                                55,
                                60,
                                65,
                                70,
                                75,
                                80,
                                85,
                                90,
                                95
                            ],
                            "default": 90,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "canopy_thresh_percentage",
                            "parameter": "Canopy Threshold Percentage",
                            "description": "Apply % on calculating Canopy Threshold height from Canopy percentile elevation.",
                            "type": "number",
                            "typelab": "float",
                            "default": 50,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "tree_radius",
                            "parameter": "Tree Search Radius",
                            "description": "Radius of canopy influence in the cost raster. This factor smooths the canopy in the cost raster which helps to prevent gaps in sparsely vegetated areas (e.g. wetlands) to be incorrectly identified as footprint. A large search radius (>=5m) may cause excessive smoothing of the cost raster which can lead to least cost paths ignoring forest-line nuances in sparsely vegetated forests. A small radius (<=1m) may cause the least cost path to cut corners through small gaps in sparse vegetation as well as avoid small obstacles that should not affect overall line shape.",
                            "type": "number",
                            "typelab": "float",
                            "default": 1.5,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "max_line_dist",
                            "parameter": "Maximum Line Distance",
                            "description": "Maximum euclidean distance from canopy. This is a second smoothing factor which helps to position the forest line shape in the center of the line footprint. An excessively small (<=1m) or large (>20m) value may cause the center line to be positioned close to one of the edges of the footprint.",
                            "type": "number",
                            "typelab": "float",
                            "default": 1.5,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "canopy_avoidance",
                            "parameter": "Canopy Avoidance",
                            "description": "Ratio of importance between canopy search radius and euclidean distance. A value close to zero (0) prioritizes search radius whereas a value close to one (1) prioritizes euclidean distance. A small value (<=0.1) may cause the forest lines to miss nuances in sparsely vegetated terrain whereas a big value (>=0.5) may overemphasize turns in complex trails. This factor influences final footprint size in a minor way.",
                            "type": "number",
                            "typelab": "float",
                            "default": 0.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "exponent",
                            "parameter": "Cost Raster Exponent",
                            "description": "Affects the cost of vegetated areas in an exponential fashion. A low (<=1) exponent may lead to lines cutting through corners, whereas a large (>=3) exponent may lead to least cost paths completely avoiding narrow lines.",
                            "type": "number",
                            "typelab": "int",
                            "default": 1,
                            "output": false,
                            "optional": true
                        }
                    ]
                },
                {
                    "name": "Ground Footprint (Fixed Width)",
                    "info": "Generating fixed width line footprint",
                    "multiprocessing": true,
                    "batch_processing": true,
                    "tool_type": "python",
                    "tool_api": "line_footprint_fixed",
                    "paramFile": "\\Scripts\\FLM_FF_params.txt",
                    "image": "../Images/FLM_IO_VertexOptimization.gif",
                    "tech_link": "https://forest-line-mapper.readthedocs.io/en/latest/Tools/Pre-processing/VertexOptimization.html",
                    "parameters": [
                        {
                            "variable": "in_line",
                            "parameter": "Forest Lines Feature Class",
                            "description": "Input polyline shapefile.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "in_layer",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "in_footprint",
                            "parameter": "Footprint",
                            "description": "Input footprint.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "in_layer_fp",
                            "default": "",
                            "output": false,
                            "optional": false
                        },
                        {
                            "variable": "n_samples",
                            "parameter": "Sampling number",
                            "description": "Sampling number for each line.",
                            "type": "number",
                            "typelab": "int",
                            "default": 15,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "offset",
                            "parameter": "Perpendicular line length",
                            "description": "The length of the perpendicular line",
                            "type": "number",
                            "typelab": "float",
                            "default": 30.0,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "max_width",
                            "parameter": "Use maximum width",
                            "description": "Use maximum width",
                            "type": "list",
                            "typelab": "bool",
                            "data": [
                                true,
                                false
                            ],
                            "default": true,
                            "output": false,
                            "optional": true
                        },
                        {
                            "variable": "out_footprint",
                            "parameter": "Output Fixed Footprint",
                            "description": "Output fixed width footprint file.",
                            "type": "vector",
                            "typelab": "SHP",
                            "layer": "out_layer",
                            "default": "",
                            "output": true,
                            "optional": false
                        }
                    ]
                }
            ]
        }
    ]
}